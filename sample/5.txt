#define NUM_OF_TEST 8000
#include <stdio.h>
#include <stdlib.h>
#include<time.h>
int main()
{
	FILE *fp;
	fp = fopen("1.1.dat", "w");
	unsigned short a;
	srand((unsigned int)time(NULL));
	unsigned short b;
	unsigned short c[0xffff];
	int i;
	for(a=0x0;a!=NUM_OF_TEST;a++)
	{
		b = rand()%0xffff;
		for(i = 0; i< a; i++)
		{
			if(c[i]==b)
			continue;
		}
		fprintf(fp, "%x ", b);
		c[a] = b;
	}
	printf("锟斤拷锟侥撅拷锟窖撅拷锟斤拷锟缴诧拷锟斤拷锟斤拷锟斤拷锟斤拷1.1.dat锟叫★拷");
	fclose(fp);
}
int StrToInt2(const char *str)  
{  
  strToIntOK = false;  
  if(str == NULL) //锟斤拷指锟斤拷  
    return 0;  
    
  if(str[0] == '0' && str[1] != '\0') //锟斤拷'0'锟斤拷始锟斤拷锟斤拷锟斤拷"0" 锟斤拷锟斤拷锟斤拷实锟斤拷锟皆猴拷锟斤拷  
    return 0;  
    
  unsigned i = 0;  
  bool minus = false;  //锟斤拷锟斤拷锟斤拷锟? 
  if(str[i] == '-' || str[i] == '+') //锟叫讹拷锟角诧拷锟斤拷锟斤拷锟斤拷锟斤拷锟脚匡拷始  
  {  
    minus = (str[i] == '-')? true: false;  
    i++;  
  }  
    
  long long result = 0; //转锟斤拷锟侥斤拷锟? 
  while(str[i] != '\0')  
  {  
    char c = str[i++];  
    if(c >= '0' && c <='9')  
    {  
      result = result * 10 + (c - '0');  
      if(minus) //锟斤拷锟斤拷锟?
      { 
        if(result - 1 > numeric_limits<int>::max())  
          return 0;  
      } 
      else //锟斤拷锟斤拷锟?
      { 
        if(result > numeric_limits<int>::max()) 
          return 0;  
      } 
    }  
    else  
    {  
      return 0;  
    }  
  }  
  strToIntOK = true;  
  //锟斤拷锟斤拷锟斤拷锟?锟斤拷强锟斤拷转锟斤拷一锟斤拷  
  return minus? (int)(-result):(int)result;  
}  

int StrToInt3(const char *str)  
{  
  strToIntOK = false;  
  if(str == NULL) //锟斤拷指锟斤拷  
    return 0;  
    
  if(str[0] == '0' && str[1] != '\0') //锟斤拷'0'锟斤拷始锟斤拷锟斤拷锟斤拷"0" 锟斤拷锟斤拷锟斤拷实锟斤拷锟皆猴拷锟斤拷  
    return 0;  
    
  unsigned i = 0;  
  bool minus = false;  //锟斤拷锟斤拷锟斤拷锟? 
  if(str[i] == '-' || str[i] == '+') //锟叫讹拷锟角诧拷锟斤拷锟斤拷锟斤拷锟斤拷锟脚匡拷始  
  {  
    minus = (str[i] == '-')? true: false;  
    i++;  
  }  
    
  long long result = 0; //转锟斤拷锟侥斤拷锟? 
  while(str[i] != '\0')  
  {  
    char c = str[i++];  
    if(c >= '0' && c <='9')  
    {  
      result = result * 10 + (c - '0');  
      if(minus) //锟斤拷锟斤拷锟?
      { 
        if(result - 1 > numeric_limits<int>::max())  
          return 0;  
      } 
      else //锟斤拷锟斤拷锟?
      { 
        if(result > numeric_limits<int>::max()) 
          return 0;  
      } 
    }  
    else  
    {  
      return 0;  
    }  
  }  
  strToIntOK = true;  
  //锟斤拷锟斤拷锟斤拷锟?锟斤拷强锟斤拷转锟斤拷一锟斤拷  
  return minus? (int)(-result):(int)result;  
}
